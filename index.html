<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
    <link rel="stylesheet" href="./css/style.css" />
    <title>–°–º–æ—Ç—Ä–∏–º –≤–º–µ—Å—Ç–µ</title>
</head>
<body>
    <div class="container">
        <h1 class="title">–°–º–æ—Ç—Ä–∏–º –≤–º–µ—Å—Ç–µ!</h1>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main_menu" class="section">
            <input
                type="text"
                id="session_name_input"
                class="input"
                placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
            />
            <button id="create_btn" class="btn btn-primary">
                <span class="icon">‚ûï</span> –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
            </button>
            <button id="join_btn" class="btn btn-primary">
                <span class="icon">üîó</span> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
            </button>
            <button id="list_btn" class="btn btn-primary">
                <span class="icon">üìã</span> –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π
            </button>
        </div>

        <!-- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ—Å—Å–∏–∏ -->
        <div id="join_session" class="section hidden">
            <input
                type="text"
                id="session_id_input"
                class="input"
                placeholder="–í–≤–µ–¥–∏—Ç–µ ID —Å–µ—Å—Å–∏–∏"
            />
            <button id="join_submit_btn" class="btn btn-primary">
                <span class="icon">‚û°Ô∏è</span> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
            </button>
            <button id="back_btn" class="btn btn-secondary back-btn">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π -->
        <div id="session_list" class="section hidden">
            <div id="sessions_container" class="lists-container">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="buttons-row">
                <button id="clear_sessions_btn" class="btn btn-secondary">
                    üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏
                </button>
                <button id="list_back_btn" class="btn btn-secondary back-btn">‚Üê –ù–∞–∑–∞–¥</button>
            </div>
        </div>

        <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Å—Å–∏–∏ -->
        <div id="session_view" class="section hidden">
            <button id="session_back_btn" class="btn btn-secondary back-btn">‚Üê –ù–∞–∑–∞–¥</button>

            <div class="session-info">
                <span>ID —Å–µ—Å—Å–∏–∏: </span><span id="current_session_id" class="session-id"></span>
                <button id="copy_btn" class="btn btn-secondary btn-small" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID">
                    üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                </button>
            </div>

            <div id="lists_container" class="lists-container"></div>

            <div class="input-group">
                <input
                    type="text"
                    id="new_item"
                    class="input"
                    placeholder="–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç"
                />
                <button id="add_btn" class="btn btn-primary">
                    <span class="icon">‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è toast-—Å–æ–æ–±—â–µ–Ω–∏–π -->
    <div id="toast_container" aria-live="polite" aria-atomic="true"></div>

    <script type="module" src="./js/index.js"></script>
    <script>
        window.onerror = function (message, source, lineno, colno, error) {
            document.body.innerHTML += `<div style="color:red; padding:10px; background:#fdd;">
                –û—à–∏–±–∫–∞: ${message}<br>
                –í —Ñ–∞–π–ª–µ: ${source}<br>
                –°—Ç—Ä–æ–∫–∞: ${lineno}:${colno}<br>
                –î–µ—Ç–∞–ª–∏: ${error}
            </div>`;
        };
    </script>
</body>
</html>
